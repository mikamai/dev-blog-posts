---
ID: 104
post_title: >
  How to setup your Core Data OSX
  application
author: Lorenzo Bulfone
post_date: 2015-07-01 12:09:20
post_excerpt: ""
layout: post
permalink: >
  https://dev.mikamai.com/2015/07/01/how-to-setup-your-core-data-osx-application/
published: true
tumblr_mikamayhem_permalink:
  - >
    http://dev.mikamai.com/post/122937503569/how-to-setup-your-core-data-osx-application
tumblr_mikamayhem_id:
  - "122937503569"
---
<p><a href="https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/CoreData/cdProgrammingGuide.html" title="Core Data programming guide">Core Data</a> is an object graph and persistence framework provided by Apple in the Mac OS X and iOS operating systems. It&rsquo;s been around for quite a while (since iPhone SDK 3.0) and it&rsquo;s probably one of the most misunderstood Frameworks on OS X and iOS. After my first experience with it I can totally understand the love/hate relationship most developers have with it.
There are a lot of good examples on how to setup your app to start using Core Data quickly and painfully, and I absolutely recommend lessons 12 and 13 from <a href="http://www.raywenderlich.com/21752/how-to-use-cocoa-bindings-and-core-data-in-a-mac-app" title="Core Data programming guide">Developing iOS 7 Apps</a> by Stanford University, but the problem is that most of them are specific to iOS and even the ones that are not (e.g the one at <a href="http://www.raywenderlich.com/21752/how-to-use-cocoa-bindings-and-core-data-in-a-mac-app" title="Core Data and Cocoa Bindings mac app">raywenderlich.com</a>) don&rsquo;t go very deep in detail as they just show basic code-free Cocoa Bindings stuff (see the link above).
The problem is that while Core Data for OS X and Core Data for iOS are basically the same thing 90% of the time, the differences that lie in that remaing 10% will make you want to smash your beloved Macbook on the floor, multiple times.<br /></p><p>On iOS all you have to do to start enjoying all the cool stuff about Core Data is create an instance of <a href="https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIManagedDocument_Class/" title="UIManagedDocument Class Reference">UIManagedDocument</a>. This will automatically generate the Persistent Store Coordinator, the Persistent Object Store and, most importantly, <b>the Managed Object Context</b> (MOC from here on).</p><p>Because if you&rsquo;re in a hurry and you just want to jump in and skip to the good stuff, <b>all you need to know is where your MOC&rsquo;s at</b>.</p><p>I&rsquo;m not going to explain from scratch how Core Data works (objc.io does a great job doing that in its <a href="http://www.objc.io/issues/4-core-data/core-data-overview/" title="Core Data Overview">Core Data Overview</a>) but basically you define <b>entities</b> (and their attributes and relationships) in your Data Model, then you insert instances of those entities into your MOC and set their attributes. Upon calling <code>[moc save:&amp;error]</code> you save those instances and the changes you&rsquo;ve made to them in your Persistent Store (a wrapper for the actual database file in the filesystem). This means that before that call you have full undo/redo support for the changes you (and your app&rsquo;s user) made on the moc. On iOS, you don&rsquo;t even have to call that <code>save</code> method because UIManagedDocument takes care of everything for you. Cool, right?</p><figure class="tmblr-full"><img src="http://68.media.tumblr.com/dab6ae224684f4346d5064e2ceef388b/tumblr_inline_nqsttseMqo1tq7pdk_540.png" alt="image" /></figure><p>The problem is that there&rsquo;s no such thing as UIManagedDocument (not even a close relative) on OS X, so you have to take care of generating all that stuff I was telling you about on your own.</p><p>The best way you can do that is by starting a new Xcode project and choose &ldquo;Use Core Data&rdquo; option. This will generate the necessary code in you Application Delegate. If you can&rsquo;t start a new project, just copy all the Core Data related methods from a new project&rsquo;s AppDelegate in your own.</p><p>Now all you need to know to use Core Data is, as I previously said, where your Managed Object Context&rsquo;s at. The MOC has been created by the code you just copied in your AppDelegate so just get a pointer to that from whenever you are in your application by doing</p><p><code>AppDelegate *delegate = (AppDelegate *)[[NSApplication sharedApplication] delegate];</code></p><p>and then access its moc property like this</p><p><code>NSManagedObjectContext *moc = delegate.managedObjectContext;</code></p><p>That&rsquo;s it, you&rsquo;re all ready to go. Happy coding!</p>